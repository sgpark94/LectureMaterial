<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vue ToDo Project</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- CSS import -->
    <link rel="stylesheet" href="../css/reset.css">

</head>
<body>
    <div style="margin: 40px 0 0 30px;">
        <p>컴포넌트를 이용하여 아래의 Todo 실행 화면을 작성하여 본다.</p>
        <a href="#" onClick="window.open('https://vuejstodo-aa185.firebaseapp.com/','Todo앱확인','width=800,height=700,toolbar=no,menubar=no,scrollbars=no,resizable=yes');return false;" rel="nofollow">TODO 애플리케이션 구현 확인 링크</a>
    </div>

    <p style="margin: 10px 0 -20px 30px;">※ 실행시 Todo html 코드 예시</p>

    <xmp>
<div id="app">
    <!-- TodoHeader -->
    <header>
        <h1>TODO it!</h1>
    </header>

    <!-- TodoInput -->
    <div class="inputBox shadow">
        <input type="text" placeholder="Type what you have to do" />
        <span class="addContainer">
            <i aria-hidden="true" class="addBtn fas fa-plus"></i>
        </span>
    </div>

    <!-- TodoList -->
    <!-- "checked(todoItem.done)"  <==> "todoItem.done ? 'checked': null "  -->
    <section>
        <ul>
            <li>
                <i aria-hidden="true" class="checkBtn fas fa-check"></i>
                영화보기
                <span type="button" class="removeBtn">
                    <i aria-hidden="true" class="far fa-trash-alt"></i>
                </span>
            </li>
            <li class="checked">
                <i aria-hidden="true" class="checkBtn fas fa-check"></i>
                주말 산책
                <span type="button" class="removeBtn">
                    <i aria-hidden="true" class="far fa-trash-alt"></i>
                </span>
            </li>
            <li>
                <i aria-hidden="true" class="checkBtn fas fa-check"></i>
                ES6 학습
                <span type="button" class="removeBtn">
                    <i aria-hidden="true" class="far fa-trash-alt"></i>
                </span>
            </li>
            <li>
                <i aria-hidden="true" class="checkBtn fas fa-check"></i>
                잠실 야구장
                <span type="button" class="removeBtn">
                    <i aria-hidden="true" class="far fa-trash-alt"></i>
                </span>
            </li>
        </ul>
    </section>

    <!-- TodoFooter -->
    <div class="clearAllContainer">
        <span class="clearAllBtn">Clear All</span>
    </div>
</div>
    </xmp>

    <hr>

    <xmp>
    Vue-CLI 을 사용하여 ToDo 어플리케이션을 만들어 본다.
    * 페이지 129~174를 참고
    * vue29-01.ToDo.html 예제 참조

    1. 앱 요구사항
        1. 컴포넌트 트리 만들기
            1-1. TodoView 컴포넌트
            1-2. TodoHeader 컴포넌트
            1-3. TodoFooter 컴포넌트
            1-4. TodoInput 컴포넌트
            1-5. TodoList 컴포넌트

        2. TodoView 컴포넌트 만들기
            2-1. TodoView 컴포넌트 만들기
            2-2. TodoView 컴포넌트의 components 컴포넌트 등록.
            2-3. TodoView 컴포넌트의 템플릿에 사용자태그(컴포넌트 태그) 기술

        3. TodoHeader 컴포넌트 만들고 컴포넌트 등록하고 태그 작성한다.
            3.1 TodoHeader 컴포넌트 만든다.
            3.2 TodoHeader 컴포넌트를 인스턴스에 등록한다.
            3.3 TodoHeader 컴포넌트 태그를 Todo 컴포넌트의 템플릿에 등록한다.

        4. TodoFooter 컴포넌트 만들고 컴포넌트 등록하고 태그 작성한다.
            4.1 TodoFooter 컴포넌트 만든다.
            4.2 TodoFooter 컴포넌트를 인스턴스에 등록한다.
            4.3 TodoFooter 컴포넌트 태그를 Todo 컴포넌트의 템플릿에 등록한다.
            4.4 TodoFooter 컴포넌트 버튼 클릭시 이벤트 발신 기능을 추가한다.
                this.$emit('clear-all', null);

        5. TodoInput 컴포넌트 만들고 컴포넌트 등록하고 태그 작성한다.
            5.1 TodoInput 컴포넌트 만든다.
            5.2 TodoInput 컴포넌트를 인스턴스에 등록한다.
            5.3 TodoInput 컴포넌트 태그를 Todo 컴포넌트의 템플릿에 등록한다.
            5.4 TodoInput 컴포넌트 버튼 클릭시 이벤트 발신 기능을 추가한다.
                this.$emit('add-todo', 넘길값);
            5.5 TodoInput 컴포넌트의 input 태그에 값을 초기화

        6. TodoList 컴포넌트 만들고 컴포넌트 등록하고 태그 작성한다.
            6.1 TodoList 컴포넌트 만든다.
            6.2 TodoList 컴포넌트를 인스턴스에 등록한다.
            6.3 TodoList 컴포넌트 태그를 Todo 컴포넌트의 템플릿에 등록한다.
            6.4 TodoList 컴포넌트 이벤트 발신 기능을 작성한다.

    ##################################
    # Vue-CLI 학습하기
    ##################################

    Vue-CLI 구성요소
        CLI코어: @vue/cli
        CLI서비스: @vue/cli-service
            웹팩
            웹팩개발서버
        CLI플러그인: @vue/cli
            router
            vuex
            @vue/cli-plugin-babel
            @vue/cli-plugin-eslint
            @vue/cli-plugin-unit-jest

    Vue-CLI 의 버전
        2.x : <== 교재
        3.x :
        4.x :
        5.x : <== 최신 버전


    Vue-CLI 플러그인 추가
        vue add 플러그인명.             예시) npx vue add vuex
        npm install --save 플러그인명.  예시) npm install --save vuex


    ##################################
    2. Vue-CLI 프로젝트 생성 및 설정 작업
    ##################################

    step 2-03. node, npm 버전 확인
        $ node -v
        v16.16.0

        $ npm -v
        8.18.0

        $ npx -v
        8.18.0

    step 2-04. 현재 폴더의 파일 목록 조회
        $ ls
        1차/  snap0093.png  snap0096.png  snap0100.png  vue61ToDo.html

        step 2-05. todoprj01 프로젝트 생성. package.json 생성.
        $ npx vue create todoprj01
        Vue CLI v5.0.8
        ? Please pick a preset:
          Default ([Vue 3] babel, eslint)
          Default ([Vue 2] babel, eslint)
        > Manually select features

        ? Check the features needed for your project:
        (*) Choose Vue version
        (*) Babel
        ( ) TypeScript
        ( ) Progressive Web App (PWA) Support
        (*) Router
        (*) Vuex
        ( ) CSS Pre-processors
        (*) Linter / Formatter
        ( ) Unit Testing
        ( ) E2E Testing

        ? Choose a version of Vue.js that you want to start the project with (Use arrow keys)
        > 3.x
          2.x

        ? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) Yes

        ? Pick a linter / formatter config:
          ESLint with error prevention only
          ESLint + Airbnb config
          ESLint + Standard config
        > ESLint + Prettier

        ? Pick additional lint features:
        > (*) Lint on save
          (*) Lint and fix on commit

        ? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)
        > In dedicated config files
          In package.json

        ? Save this as a preset for future projects? (y/N) N

        ...(중략)
        $ cd todoprj01
        $ npm run serve


    step 2-06. 현재 폴더의 파일 목록 조회.
                프로젝터 폴더(todoprj01) 존재 여부 확인.
        $ ls
        1차/  snap0093.png  snap0096.png  snap0100.png  todoprj01/  vue61ToDo.html


    step 2-07. 생성된 프로젝트 폴더(todoprj01)로 이동
        $ cd todoprj01


    step 2-08. 현재 폴더의 파일 목록 조회. package.json 이 보이면 정상.
        $ ls
        babel.config.js  lint-staged.config.js  package.json       public/    src/
        jsconfig.json    node_modules/          package-lock.json  README.md  vue.config.js


    step 02-09. router 라이브러리 추가
        $ npx vue add router

    step 02-10. vuex 라이브러리 추가
        $ npx vue add vuex

    step 2-11. 비동기 통신 axios 라이브러리 추가.
        package.json 에 관련 정보가 추가 된다.
        $ npm install --save axios

    step 2-12.  프로젝트 실행 설정 todoprj01/package.json 수정
        a. 실행시 브라우저로 열기  ==>  --open
        b. 실행 서버 포트 설정     ==>  --port 4000
        c. 실행 호스트 설정        ==>  --host 127.0.0.1

        "scripts": {
            "serve": "vue-cli-service serve --open --port 4000 --host 127.0.0.1",
            "build": "vue-cli-service build",
            "lint": "vue-cli-service lint"
        },

    step 2-13. 현재 폴더의 파일 목록 조회. package.json 존재하는지 확인
        $ ls

    step 2-14. 서버 실행. package.json 이 있는 폴더에서 실행 해야 됨.
        $ npm run serve

        App running at:
        - Local:   http://127.0.0.1:4000/
        - Network: http://127.0.0.1:4000/

        Note that the development build is not optimized.
        To create a production build, run npm run build.

        step 2-15. 배포할 파일을 생성.
            빌드가 완료되면 dist/ 폴더가 생기고 관련 파일들이 생성됨.
        $ npm run build

        step 2-16. 코드 표준화 수행
        $ npm run lint



    ##################################
    3. 프로젝트 디폴트 폴더 구조
    ##################################

        프로젝트
        |-- dist                     # 빌드된 결과물이 저장되는 폴더. 서버로 배포되는 파일들.
        |-- node_modules             # npm 모듈(패키지) 저장 폴더
        |-- public                   # 배포 버전을 빌드할 때 사용하는 파일.
        |   |-- index.html
        |   `-- favion.ico
        |-- src                      # 소스 코드 폴더
        |   |-- assets               # 이미지, CSS, 기타 자원 파일
        |   |   `-- logo.png
        |   |-- components           # 컴포넌트
        |   |   `-- HelloWorld.vue
        |   |-- router               # 라우터
        |   |   `-- index.js
        |   |-- views                # 라우터 페이지
        |   |   |-- About.vue
        |   |   `-- Home.vue
        |   |-- App.vue
        |   `-- main.js
        |-- .browserslistrc
        |-- .eslintrc.js
        |-- .gitignore
        |-- .prettierrc
        |-- babel.config.js
        |-- jsconfig.json
        |-- package.json
        |-- README.md
        `-- package.json


    ##################################
    4. 프로젝트 환경 설정
        소요시간: 15분
    ##################################

    step 4-01. eslint 설정

        ESLint의 핵심 구성 정보는 env, globals, rules 세 가지 영역으로 나누어져 구성되어 있습니다.
        . env는 실행 환경에 대한 설정, 사전 전역 변수 설정. 브라우저, node, es6 환경이 활성화
        . globals는 사용자가 추가하는 전역 변수 설정.
        . extends 설치한 플러그인들의 적용과 설정에 관한 것들.
        . plugins 설치한 플러그인들의 적용과 설정에 관한 것들.
        . rules 설치한 플러그인들의 적용, 활성화 규칙 및 오류 설정에 관한 것들.

        # package.json 파일이 있는지 확인
        $ ls -a

        .eslintrc.js 파일을 프로젝트 루트에 만들고 아래 내용을 추가한다.
        $ touch .eslintrc.js

        $ cat .eslintrc.js
        module.exports = {
            root: true,
            env: {
              node: true,
              browser: true,
              commonjs: true,
              es2021: true,
              jest: true,
              es6: true,
            },
            extends: [
                'plugin:vue/essential',
                'eslint:recommended',
                'plugin:prettier/recommended'
            ],
            parserOptions: {
              parser: '@babel/eslint-parser',
            },
            plugins: ['prettier'],
            rules: {
              'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
              'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
              'prettier/prettier': ['error', { endOfLine: 'auto' }],
              'linebreak-style': 'off',
              'arrow-parens': ['error', 'always'],
              'arrow-body-style': 'off',
              'consistent-return': 'off',
              'func-names': 'off',
              'no-shadow': 'off',
              'no-alert': 'off',
              'no-var': 'error',
              'no-unused-vars': 'off',
              'no-param-reassign': ['error', { props: false }],
            },
        };


    step 4-02. Prettier 설정

        https://prettier.io/docs/en/options.html

        .prettierrc 파일을 프로젝트 루트에 만들고 아래 내용을 추가한다.
        $ touch .prettierrc

        $ cat .prettierrc
        {
            "printWidth": 80,
            "tabWidth": 2,
            "singleQuote": true,
            "semi": true,
            "useTabs": false,
            "trailingComma": "all",
            "proseWrap": "always",
            "requireConfig": false,
            "bracketSpacing": true,
            "jsxBracketSameLine": false,
            "jsxSingleQuote": false,
            "quoteProps": "as-needed",
            "endOfLine": "crlf",
        }


    step 4-03. 프로젝트 전체 소스에 lint 적용
    $ ls

    $ npm run lint



    ##################################
    5. 프로젝트에 폴더 및 파일 추가
    ##################################

        프로젝트
        |-- dist
        |-- node_modules
        |-- public
        |   |-- favicon.ico
        |   `-- index.html
        |-- src
        |   |-- assets
        |   |   `-- logo.png
        |   |-- components
        |   |       `-- todo
        |   |           |-- TodoHeader.vue  # 파일 생성. Vue component에 해당됨
        |   |           |-- TodoInput.vue   # 파일 생성. Vue component에 해당됨
        |   |           |-- TodoList.vue    # 파일 생성. Vue component에 해당됨
        |   |           `-- TodoFooter.vue  # 파일 생성. Vue component에 해당됨
        |   |-- router
        |   |   `-- index.js
        |   |-- store
        |   |   `-- index.js
        |   |-- views
        |   |   `-- TodoView.vue            # 파일 생성. Vue 인스턴스에 해당됨
        |   |-- App.vue
        |   `-- main.js
        |-- .browserslistrc
        |-- .eslintrc.js
        |-- .gitignore
        |-- README.md
        |-- babel.config.js
        |-- jsconfig.json
        |-- package.json
        `-- vue.config.js

        # package.json 존재 여부 확인
        $ ls
        babel.config.js  jsconfig.json  node_modules/  package.json  package-lock.json  public/  README.md  src/  vue.config.js


        # 폴더 만들기
        $ mkdir -p src/components/todo/

        $ touch src/views/TodoView.vue \
                src/components/todo/TodoHeader.vue \
                src/components/todo/TodoInput.vue \
                src/components/todo/TodoList.vue \
                src/components/todo/TodoFooter.vue


    ##################################
    5. 프로젝트 초기 설정. page 133~134
    ##################################

        프로젝트의 폴더 구조
        |-- public/index.html 을 열고 아래의 코드를 추가

        5-1. viewport 설정
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        5-2. favicon 설정
        <link rel="icon" href="<%= BASE_URL %>favicon.ico">
        <link rel="shortcut icon" href="<%= BASE_URL %>favicon.ico">

        5-3. fontawesome 폰트 설정
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">

        5-4. ubuntu 폰트 설정
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu">


    ##################################
    6. 라우팅 설정
    ~/src/App.vue 에 router-link 추가
    ~/src/router/index.js 수정
    ##################################

        step 6-1. ~/src/App.vue 에 router-link 추가
            <div id="app">
                <div id="nav">
                    <router-link to="/">Home</router-link> |
                    <router-link to="/about">About</router-link> |
                    <router-link to="/todo">Todo</router-link>
                </div>
                <router-view />
            </div>

        step 6-2. ~/src/router/index.js 수정
            아래 코드 추가
            {
                path: '/todo',
                name: 'Todo',
                component: () => import('../views/TodoView.vue')
            }


    ##################################
    7. 컴포넌트 1차 구현:
    ##################################

        step 7-1. src/views/TodoView.vue 에 style 과 html 추가
            vue61ToDo/1차/TodoView.vue 내용을 복사하여 붙여넣기

        step 7-2. src/components/todo/TodoHeader.vue 기능완성
        step 7-2-1. src/components/todo/TodoHeader.vue 에 style 과 html 추가
            vue61ToDo/1차/TodoHeader.vue 내용을 복사하여 붙여넣기

        step 7-2-2. src/components/todo/TodoHeader.vue  에 추가
            < script>
            export default {
                /* pdtmc^2w */
                props: []
            };
            </script>

        step 7-2-3. src/views/TodoView.vue 에 TodoHeader컴포넌트 등록

            <template>
                <div id="app">
                    <!-- TodoHeader -->
                    <TodoHeader></TodoHeader>
                </div>
            </template>

            < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";

            export default {
                // ... 중략
                components : {
                    TodoHeader,
                }
            }
            </script>


        step 7-3. src/components/todo/TodoFooter.vue  만들기
        step 7-3-1. src/components/todo/TodoFooter.vue 에 style 과 html 추가
            vue61ToDo/1차/TodoFooter.vue 내용을 복사하여 붙여넣기
        step 7-3-2. src/components/todo/TodoFooter.vue  에 추가
            < script>
            export default {
                /* pdtmc^2w */
                props: [],
                methods: {
                    clearAll() {
                    }
                }
            };
            </script>

        step 7-3-3. src/views/TodoView.vue 에 TodoFooter 컴포넌트 등록
            template 에 props와 event 바인드를 설정
            <template>
                <div id="app">
                    <!-- TodoHeader -->
                    <TodoHeader></TodoHeader>

                    <!-- TodoFooter -->
                    <TodoFooter v-on:clearAll="clearAll"></TodoFooter>
                </div>
            </template>

            < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";
            import TodoFooter from "@/components/todo/TodoFooter.vue";

            export default {
                // ... 중략
                components : {
                    TodoHeader: TodoHeader,
                    TodoFooter: TodoFooter,
                }
            }
            </script>

        step 7-4. src/components/todo/TodoInput.vue  만들기
        step 7-4-1. src/components/todo/TodoInput.vue  에 style 과 html 추가
            vue61ToDo/1차/TodoInput.vue 내용을 복사하여 붙여넣기
        step 7-4-2. src/components/todo/TodoInput.vue   에 추가
            < script>
            export default {
                /* pdtmc^2w */
                props: [],
                data() {
                    return {
                        newTodoItem: null,
                        showModal: false
                    };
                },
                methods: {
                    addTodo() {
                    }
                }
            };
            </script>
        step 7-4-3. src/views/TodoView.vue 에 TodoInput 컴포넌트 등록
            template 에 props와 event 바인드를 설정
            <template>
                <div id="app">
                    <!-- TodoHeader -->
                    <TodoHeader></TodoHeader>

                    <!-- TodoInput -->
                    <TodoInput v-on:addTodo="addTodo"></TodoInput>

                    <!-- TodoFooter -->
                    <TodoFooter v-on:clearAll="clearAll"></TodoFooter>
                </div>
            </template>

            < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";
            import TodoFooter from "@/components/todo/TodoFooter.vue";
            import TodoInput from "@/components/todo/TodoInput.vue";

            export default {
                // ... 중략
                components : {
                    TodoHeader: TodoHeader,
                    TodoFooter: TodoFooter,
                    TodoInput: TodoInput,
                }
            }
            </script>


        step 7-5. src/components/todo/TodoList.vue  만들기
        step 7-5-1. src/components/todo/TodoList.vue   에 style 과 html 추가
            vue61ToDo/1차/TodoList.vue 내용을 복사하여 붙여넣기
        step 7-5-2. src/components/todo/TodoList.vue   에 추가
            < script>
            export default {
                /* pdtmc^2w */
                props: ["todoItems"],
                methods: {
                    checked(done) {
                    },
                    doneToggle(id) {
                    },
                    removeTodo(id) {
                    }
                }
            };
            </script>
        step 7-5-3. src/views/TodoView.vue 에 컴포넌트 등록 및 template 에 props와 event 바인드를 설정
            <template>
                <div id="app">
                    <!-- TodoHeader -->
                    <TodoHeader></TodoHeader>

                    <!-- TodoInput -->
                    <TodoInput v-on:addTodo="addTodo"></TodoInput>

                    <!-- TodoList -->
                    <TodoList
                        v-bind:todoItems="todoItems"
                        v-on:doneToggle="doneToggle"
                        v-on:removeTodo="removeTodo"
                    >
                    </TodoList>

                    <!-- TodoFooter -->
                    <TodoFooter v-on:clearAll="clearAll"></TodoFooter>
                </div>
            </template>

            < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";
            import TodoInput  from "@/components/todo/TodoInput.vue";
            import TodoList   from "@/components/todo/TodoList.vue";
            import TodoFooter from "@/components/todo/TodoFooter.vue";

            export default {
                data() {
                    return {
                        todoItems: [
                            { id: 1, todo: "영화보기", done: false },
                            { id: 2, todo: "주말 산책", done: true },
                            { id: 3, todo: "ES6 학습", done: false },
                            { id: 4, todo: "잠실 야구장", done: false }
                        ]
                    };
                },
                components : {
                    TodoHeader: TodoHeader,
                    TodoFooter: TodoFooter,
                    TodoInput: TodoInput,
                    TodoList: TodoList,
                }
            }
            </script>



    ##################################
    9.  컴포넌트 3차 구현: 상태 관리 구현
    ##################################

        props 와 이벤트를 이용하여 상태 관리 구현

        step 9-1. src/components/todo/TodoHeader.vue 에 추가
        < script>
        export default {
            /* pdtmc^2w */
            props: []
        };
        </script>


        step 9-2. src/components/todo/TodoFooter.vue  에 추가
        < script>
        export default {
            /* pdtmc^2w */
            props: [],
            methods: {
                clearAll() {
                    this.$emit("clearAll");
                }
            }
        };
        </script>


        step 9-3. src/components/todo/TodoList.vue   에 추가
        < script>
        export default {
            /* pdtmc^2w */
            props: ["todoItems"],
            methods: {
                checked(done) {
                    if (done) {
                        return "checked"; // 또는 {checked: true}
                    } else {
                        return null; // 또는 {checked: false}
                    }
                },
                doneToggle(id) {
                    this.$emit("doneToggle", id);
                },
                removeTodo(id) {
                    this.$emit("removeTodo", id);
                }
            }
        };
        </script>


        step 9-4. rc/components/todo/TodoInput.vue  에 추가
        < script>
        export default {
            /* pdtmc^2w */
            props: [],
            data() {
                return {
                    newTodoItem: null,
                    showModal: false
                };
            },
            methods: {
                addTodo() {
                    if (
                        this.$data.newTodoItem &&
                        this.$data.newTodoItem.trim() !== ""
                    ) {
                        // 부모에게 addTodo 이벤트에 값을 담아서 넘기기
                        const newTodoItem = this.$data.newTodoItem.trim();
                        this.$emit("addTodo", newTodoItem);

                        // input 태그 초기화
                        this.$set(this.$data, "newTodoItem", "");
                    } else {
                        this.$data.showModal = !this.$data.showModal;
                    }
                }
            }
        };
        </script>


        step 9-5. src/views/TodoView.vue  에 추가
        < script>
        import TodoHeader from "@/components/todo/TodoHeader.vue";
        import TodoInput from "@/components/todo/TodoInput.vue";
        import TodoList from "@/components/todo/TodoList.vue";
        import TodoFooter from "@/components/todo/TodoFooter.vue";

        export default {
            /* pdtmc^2w */
            props: [],
            data() {
                return {
                    todoItems: [
                        { id: 1, todo: "영화보기", done: false },
                        { id: 2, todo: "주말 산책", done: true },
                        { id: 3, todo: "ES6 학습", done: false },
                        { id: 4, todo: "잠실 야구장", done: false }
                    ]
                };
            },
            //template: ``,
            methods: {
                clearAll() {
                    // delete
                    //this.$data.todoItems = [];
                    this.$set(this.$data, "todoItems", []);
                },
                addTodo(newTodoItem) {

                    // todoItems에서 최대 id 값을 구하는 방법.
                    // 방법1. todoItems.reduce() 를 사용하여 newId를 구하는 방법
                    // 방법2. 방법2. todoItems.reduce() 를 사용하여 최대 id 값을 찾기
                    // 방법3. todoItems.map()과 Math.max()를 사용하여 max id를 찾는 방법

                    // newTodoItem 값이 없으면 종료한다. 빈값 호출 방지.
                    if (newTodoItem && newTodoItem.trim() === "") {
                        return;
                    }

                    // 방법1. todoItems.reduce() 를 사용하여 최대 id 값을 갖고있는 object 를 찾기
                    let maxObj = null;
                    if (this.$data.todoItems && this.$data.todoItems.length > 0) {
                        // this.$data.todoItems.reduce()를 사용하여 최대 id 값을 갖고있는 element 를 찾는다.
                        maxObj = this.$data.todoItems.reduce( (prevItem, nextItem)=>{
                            return prevItem.id > nextItem.id ? prevItem : nextItem; //
                        });
                    } else {
                        // 빈 배열인 경우
                        maxObj = {
                            id: 0
                        };
                    }
                    const newid1 = maxObj.id + 1;

                    // 방법2. todoItems.reduce() 를 사용하여 최대 id 값을 찾기
                    let maxid = 0;
                    if (this.$data.todoItems.length > 0) {
                        maxid = this.$data.todoItems.reduce((maxid, obj) => {
                            return maxid >= obj.id ? maxid : obj.id;
                        });
                    } else {
                        // 빈 배열인 경우
                        maxid = 0;
                    }
                    const newid2 = maxid + 1;

                    // 방법3. todoItems.map()과 Math.max()를 사용하여 newId를 구하는 방법
                    let arrIds = [];
                    if (this.$data.todoItems.length > 0) {
                        arrIds = this.$data.todoItems.map(function(el) {
                            return el.id;
                        });
                    }
                    const newid3 = Math.max(...arrIds) + 1;

                    // 추가할 객체 생성:
                    // input에 입력된 값 ==> newTodoItem ;
                    const newTodo = {
                        id: newid1,
                        todo: newTodoItem,
                        done: false
                    };

                    // this.$data.todoItems 에 newTodo를 추가하시오.
                    // this.$data.todoItems.push(newTodo);
                    // this.$data.todoItems[this.$data.todoItems.length] = newTodo;
                    this.$set(this.$data.todoItems, this.$data.todoItems.length, newTodo);
                },
                doneToggle(id) {
                    // update
                    // object array 에서 찾는 방법
                    // 1. array.findIndex()을 사용하는 방법
                    // 2. array.filter()을 사용하는 방법
                    const index = this.$data.todoItems.findIndex(function(item) {
                        //return item.id === id;
                        if (item.id === id) {
                            return true;
                        } else {
                            return false;
                        }
                    });

                    if (index >= 0) {
                        //this.$data.todoItems[index].done = !this.$data.todoItems[index].done;
                        this.$set( this.$data.todoItems[index], "done", !this.$data.todoItems[index].done );
                    }
                },
                removeTodo(id) {
                    // delete: ;
                    // id 값을 이용해서 배열의 index를 찾으시오. ==> findIndex() 사용
                    const findIndex = this.$data.todoItems.findIndex( (item) =>{
                        return item.id === id;
                    });

                    // 찾은 인덱스를 이용하여 this.$data.todoItems 에서 삭제하시오.
                    // 방법1: array.splice() 을 사용하는 방법
                    // 방법2: array.map() 을 사용하는 방법
                    this.$data.todoItems.splice(findIndex, 1);

                    // 이벤트 취소. 버블링 방지
                    event.stopPropagation();
                    event.preventDefault();
                },
            },
            components: {
                TodoHeader: TodoHeader,
                TodoInput: TodoInput,
                TodoList: TodoList,
                TodoFooter: TodoFooter
            }
        };
        </script>


    ##################################
    10. 프로젝트 4차 개선.
    ##################################
        Todo 에 Vuex 를 적용하여 본다.

        1. GET 구현
            1. store.state 코드 작성. 컴포넌트의 공유 데이터를 store.state 로 이동
            2. store.getters 코드 작성
            3. 인스턴스나 컴포넌트의 computed 에 store.getters 구독 코드 작성

        2. SET 구현
            1. store.actions 코드 작성
            2. store.mutations 코드 작성
            3. 인스턴스나 컴포넌트 의 methods 에서 store.dispatch 호출 하도록 수정

        3. 컴포넌트의 로직을 Vuex 로 이동시 주의 사항.
            1. this.$set() 는 Vuex 에서 사용할 수 없다.
            2. this.$data 는 Vuex 에서 사용할 수 없다. ==> this.$data 는  state 로 변경 한다.
            3. Vuex 에서 객체배열(Object Array)에 값을 추가할 때는 array의 push 메서드를 사용해도 된다.

        step 10-1. src\store\index.js 수정

        import Vue from "vue";
        import Vuex from "vuex";

        Vue.use(Vuex);

        export default new Vuex.Store({
            actions: {
                clearAll( mutations/* 고정 */){
                    mutations.commit("clearAll");
                },
                addTodo( mutations/* 고정 */, newTodoItem ){
                    mutations.commit("addTodo", newTodoItem );
                },
                doneToggle( mutations/* 고정 */, id ){
                    mutations.commit("doneToggle", id );
                },
                removeTodo( mutations/* 고정 */, id ){
                    mutations.commit("removeTodo", id );
                },
                getTodo( mutations/* 고정 */){
                    mutations.commit("getTodo" );
                },
            },
            mutations: {
                clearAll(state/* 고정 */){
                    /* ...중략. 직접 작성 */
                },
                addTodo(state/* 고정 */, newTodoItem){
                    /* ...중략. 직접 작성 */
                },
                doneToggle(state/* 고정 */, id){
                    /* ...중략. 직접 작성 */
                },
                removeTodo(state/* 고정 */, id){
                    /* ...중략. 직접 작성 */
                },
                getTodo(state/* 고정 */) {
                    /* ...중략. 직접 작성 */
                },
            },
            state: {
                /* vue인스턴스나 컴포넌트의 data 프로퍼티에 해당 */
                todoItems: [
                    { id: 1, todo: "영화보기", done: false },
                    { id: 2, todo: "주말 산책", done: true },
                    { id: 3, todo: "ES6 학습", done: false },
                    { id: 4, todo: "잠실 야구장", done: false }
                ]
            },
            getters: {
                /* state 변경 여부를 컴포넌트에 알리는 역활
                    * 메서드로 만들어야 하며 메서드명은 state 의 프로퍼티명과 동일하게 사용
                    * 첫번째인자: 무조건 state
                    */
                    todoItems: function(state/* 고정 */){
                        return state.todoItems;
                    },
            },
        });

        step 10-2. src\views\TodoView.vue 수정
        < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";
            import TodoInput from "@/components/todo/TodoInput.vue";
            import TodoList from "@/components/todo/TodoList.vue";
            import TodoFooter from "@/components/todo/TodoFooter.vue";

            import store from "@/store/index.js";  // <== 추가

            export default {
                /* pdtmc^2w */
                data: function() {
                    return {};
                },
                //template: ``,
                methods: {
                    addTodo: function(newTodoItem) {
                        // create. store "addTodo" dispatch
                    },
                    doneToggle: function(id) {
                        // update. store의 "doneToggle" dispatch
                    },
                    removeTodo: function(id) {
                        // delete each. store의 "removeTodo" dispatch
                    },
                    clearAll: function() {
                        // delete all. store의 "clearAll" dispatch
                    }
                },
                components: {
                    TodoHeader: TodoHeader,
                    TodoInput: TodoInput,
                    TodoList: TodoList,
                    TodoFooter: TodoFooter
                },
                computed: {
                    /* computed를 사용하여 store의 state를 모니터링하게 작성
                        * 동일한 프로퍼티명이 computed 와 data 에 존재하면 안된다. 한쪽에만 있어야 한다
                        */
                    todoItems: function() {
                        return store.getters.todoItems;
                    }
                },
                created: function() {
                    console.log("created");
                    // read. store의 "getTodo" dispatch
                }
            };
            </script>
    </xmp>
    <hr>


    <pre>
    ##################################
    11. 프로젝트 5차 개선.
    ##################################
        Todo 에 vuex 와 axios를 적용하여 본다.
    </pre>

    <div style="margin: 0 0 0 90px;">
        step 11-1. 서버 실행
        ※ 실행 전에  서버를 실행하세요. <a href="#" onClick="window.open('../../ES2015문법/ap09.서버통신/ap09-03.Node서버실행.html','Node서버실행','width=900,height=850,toolbar=no,menubar=no,scrollbars=no,resizable=yes');return false;" rel="nofollow">Node서버실행</a>
    </div>

    <pre>
            <a href="http://localhost:5050/todo/get" target="_blank" rel="noopener noreferrer">http://localhost:5050/todo/get</a>
            <a href="http://localhost:5050/todo/add?todo=여행가기" target="_blank" rel="noopener noreferrer">http://localhost:5050/todo/add?todo=여행가기</a>
            <a href="http://localhost:5050/todo/donetoggle?id=1" target="_blank" rel="noopener noreferrer">http://localhost:5050/todo/donetoggle?id=1</a>
            <a href="http://localhost:5050/todo/remove?id=2" target="_blank" rel="noopener noreferrer">http://localhost:5050/todo/remove?id=2</a>
            <a href="http://localhost:5050/todo/clearall" target="_blank" rel="noopener noreferrer">http://localhost:5050/todo/clearall</a>
    </pre>
    <xmp>
        step 11-2. src\store\index.js 수정

        import Vue from "vue";
        import Vuex from "vuex";
        import axios from "axios";  // 추가

        Vue.use(Vuex);

        export default new Vuex.Store({
            actions: {
                addTodo(mutations, newTodoItem) {
                    /**
                        * Create.
                        * axios 로  http://localhost:5050/todo/add 호출
                        * 비동기 호출 코드는 직접 작성.
                        * 서버로 보내는 데이터. 예시) { todo: "여행가기", done: false }
                        * params: { todo: "여행가기", done: false }
                        * axios 호출 성공 하면 mutations.commit("addTodo", res.data); 호출
                        */
                },
                doneToggle(mutations, id) {
                    /**
                        * Update(개별).
                        * axios 로  http://localhost:5050/todo/donetoggle 호출
                        * 비동기 호출 코드는 직접 작성.
                        * 서버로 보내는 데이터. 예시) { id:2 }
                        * params: { id }
                        *
                        * axios 호출 성공 하면 mutations.commit("doneToggle", res.data); 호출
                        */
                },
                removeTodo(mutations, id) {
                    /**
                        * Delete(개별)
                        * axios 로  http://localhost:5050/todo/remove
                        * 비동기 호출 코드는 직접 작성.
                        * 서버로 보내는 데이터. 예시) { id:2 }
                        * params: { id }
                        * axios 호출 성공 하면 mutations.commit("removeTodo", res.data); 호출
                        */
                },
                clearAll(mutations) {
                    /**
                        * Delete(전체)
                        * axios 로  http://localhost:5050/todo/clearall
                        * 비동기 호출 코드는 직접 작성.
                        * 서버로 보내는 데이터. 예시) {  }
                        * params: null
                        * axios 호출 성공 하면 mutations.commit("clearAll", res.data); 호출
                        */
                },
                getTodo(mutations) {
                    /**
                        * Read.
                        * axios 로  http://localhost:5050/todo/get 호출
                        * 비동기 호출 코드는 직접 작성.
                        * 서버로 보내는 데이터. 예시) {  }
                        * params: null
                        * axios 호출 성공 하면 mutations.commit("todo", res.data); 호출
                        */
                },
            },
            mutations: {
                /* 왜 mutations 를 사용하나? state 를 바꾸기 위해서
                    * mutations 에는 메서드만 등록 가능하다.
                    * 첫번째인자: 무조건 state 로 고정.
                    * 두번째인자: 값. mutations.commit() 호출시 넘겨지는 값.
                    * */
                addTodo(
                    state /* 고정 */,
                    param /* mutations.commit 호출시 넘겨지는 값 */
                ) {
                    state.todoItems = param;
                },
                doneToggle(
                    state /* 고정 */,
                    param /* mutations.commit 호출시 넘겨지는 값 */
                ) {
                    state.todoItems = param;
                },
                removeTodo(
                    state /* 고정 */,
                    param /* mutations.commit 호출시 넘겨지는 값 */
                ) {
                    state.todoItems = param;
                },
                clearAll(
                    state /* 고정 */,
                    param /* mutations.commit 호출시 넘겨지는 값 */
                ) {
                    state.todoItems = param;
                },
                getTodo(
                    state /* 고정 */,
                    param /* mutations.commit 호출시 넘겨지는 값 */
                ) {
                    state.todoItems = param;
                },
            },
            state: {
                /* vue인스턴스나 컴포넌트의 data 프로퍼티에 해당 */
                todoItems: []
            },
            getters: {
                /* state 변경 정보를 컴포넌트에 전달하는 역활.
                    * 메서드로 만들어야 하며 메서드명은 state 의 이름을 그대로 사용
                    * 첫번째인자: 무조건 state
                    * 컴포넌트에서는 computed를 사용하여 store의 state 변경 정보를 자동으로 가져오게 된다.
                    * 예시) message()=> store.getters.인자;
                    */
                todoItems: function (state /* 고정 */) {
                    return state.todoItems;
                }
            }
        });


        step 11-3. src\views\TodoView.vue 수정
        < script>
            import TodoHeader from "@/components/todo/TodoHeader.vue";
            import TodoInput from "@/components/todo/TodoInput.vue";
            import TodoList from "@/components/todo/TodoList.vue";
            import TodoFooter from "@/components/todo/TodoFooter.vue";

            import store from "@/store/index.js";  // <== 추가

            export default {
                /* pdtmc^2w */
                data: function() {
                    return {};
                },
                //template: ``,
                methods: {
                    addTodo: function(newTodoItem) {
                        // create. store "addTodo" dispatch
                        store.dispatch("addTodo", newTodoItem);
                    },
                    doneToggle: function(id) {
                        // update. store의 "doneToggle" dispatch
                        store.dispatch("doneToggle", id);
                    },
                    removeTodo: function(id) {
                        // delete each. store의 "removeTodo" dispatch
                        store.dispatch("removeTodo", id);
                    },
                    clearAll: function() {
                        // delete all. store의 "clearAll" dispatch
                        store.dispatch("clearAll");
                    }
                },
                components: {
                    TodoHeader: TodoHeader,
                    TodoInput: TodoInput,
                    TodoList: TodoList,
                    TodoFooter: TodoFooter
                },
                computed: {
                    /* computed를 사용하여 store의 state를 모니터링하게 작성
                        * 동일한 프로퍼티명이 computed 와 data 에 존재하면 안된다. 한쪽에만 있어야 한다
                        */
                    todoItems: function() {
                        return store.getters.todoItems;
                    }
                },
                watch: {},
                created: function() {
                    console.log("created");
                    // read. store의 "getTodo" dispatch
                },
                mounted: function() {
                    console.log("mounted");
                },
                updated: function() {
                    console.log("updated");
                }
            };
            </script>


    ##################################
    12. 로그인 기능 추가
    ##################################

        프로젝트
        |-- dist
        |-- node_modules
        |-- public
        |   |-- index.html
        |   |-- favion.ico
        |-- src
        |   |-- components
        |       |   |-- user
        |       |       |-- UserLogin.vue      # 파일 생성. Vue component에 해당됨
        |       |       |-- UserRegister.vue   # 파일 생성. Vue component에 해당됨
        |       |-- views
        |           |-- Signup.vue            # 파일 생성. Vue 인스턴스에 해당됨
        |-- babel.config.js
        |-- package.json
        |-- README.md


        step 12-1. componets 에 추가
                ~/src/components/login/user/UserLogin.vue 생성 및 수정
                ~/src/components/login/user/UserRegister.vue 생성 및 수정

        step 12-2. views에 추가
                cp ~/src/views/About.vue ~/src/views/Signup.vue

        step 12-3. ~/src/router/index.js 수정
            import UserLogin from "@/components/user/UserLogin.vue";

            {
                path: "/signup",
                name: "Signup",
                component: () =>import("../views/Signup.vue")
            },
            {
                path: "/login",
                name: "Login",
                component: UserLogin
            }

        step 12-4. App.vue 에 router-link 추가
            <div id="app">
                <div>
                    <router-link to="/login">Login</router-link>
                </div>
                <div id="nav">
                    <router-link to="/">Home</router-link> |
                    <router-link to="/about">About</router-link> |
                    <router-link to="/todo">Todo</router-link> |
                    <router-link to="/signup">Signup</router-link>
                </div>
                <router-view />
            </div>

    </xmp>

</body>
</html>
